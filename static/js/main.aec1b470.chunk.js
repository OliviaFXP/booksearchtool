(this.webpackJsonpbooksearchtool=this.webpackJsonpbooksearchtool||[]).push([[0],{12:function(t,e,r){},13:function(t,e,r){},15:function(t,e,r){"use strict";r.r(e);var o=r(1),n=r.n(o),s=r(7),c=r.n(s),l=(r(12),r(2)),a=r(3),i=r(5),u=r(4),h=(r(13),r(0)),d=function(t){return Object(h.jsx)("header",{className:"header",children:Object(h.jsx)("div",{className:"wrapper",children:Object(h.jsxs)("span",{className:"header-title",children:[" ",t.subtitle]})})})},b=function(t){Object(i.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(l.a)(this,r);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))).state={titleSearchTerm:""},t.onSearchChagne=function(e){e.preventDefault(),t.props.searchBooksByTitle(t.state.titleSearchTerm)},t.onTextChange=function(e){e.preventDefault(),t.setState({titleSearchTerm:e.target.value})},t}return Object(a.a)(r,[{key:"render",value:function(){var t=this.state.titleSearchTerm;return Object(h.jsxs)("div",{id:"search-bar",children:[Object(h.jsx)("label",{htmlFor:"query",children:"Search"}),Object(h.jsx)("input",{id:"query",type:"search",value:t,onChange:this.onTextChange}),Object(h.jsx)("button",{onClick:this.onSearchChagne,children:"Search"})]})}}]),r}(o.Component),j=function(t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{"data-label":"Book cover",children:Object(h.jsx)("img",{src:t.book.book_cover_url,alt:"book cover"})}),Object(h.jsx)("td",{"data-label":"Title",children:t.book.title}),Object(h.jsx)("td",{"data-label":"Author",children:t.book.author}),Object(h.jsx)("td",{"data-label":"Published Date",children:t.book.published_date})]})},p={title_up:{class:"sort-up",sort_column:"title",sort_order:"up",fn:function(t,e){return t.localeCompare(e)}},title_down:{class:"sort-down",sort_column:"title",sort_order:"down",fn:function(t,e){return e.localeCompare(t)}},most_recent_publish_year_up:{class:"sort-up",sort_column:"most_recent_publish_year",sort_order:"up",fn:function(t,e){return t-e}},most_recent_publish_year_down:{class:"sort-down",sort_column:"most_recent_publish_year",sort_order:"down",fn:function(t,e){return e-t}},default:{class:"sort",sort_column:"title",sort_order:"up",fn:function(t,e){return t.localeCompare(e)}}},_=function(t){Object(i.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(l.a)(this,r);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))).state={currentSort:p.default},t.test=null,t.determineNextSort=function(t,e){var r;return r=t.sort_column===e?t===p.default?p[e+"_up"]:"title"===t.sort_column&&"up"===t.sort_order?p.title_down:"title"===t.sort_column&&"down"===t.sort_order?p.title_up:"most_recent_publish_year"===t.sort_column&&"up"===t.sort_order?p.most_recent_publish_year_down:"most_recent_publish_year"===t.sort_column&&"down"===t.sort_order?p.most_recent_publish_year_up:p[e+"_up"]:p[e+"_up"],console.log(r),r},t.onSortChange=function(e,r){t.setState({currentSort:t.determineNextSort(t.state.currentSort,e)})},t}return Object(a.a)(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t,e=this.props.results,r=this.state.currentSort;e&&(t=e.sort((function(t,e){return r.fn(t[r.sort_column],e[r.sort_column])})).map((function(t){return Object(h.jsx)(j,{book:t},t.key)})));return Object(h.jsx)("div",{className:"wrapper",children:Object(h.jsxs)("table",{className:"responsive-table",children:[Object(h.jsxs)("caption",{children:["List of books search with ",this.props.bookSearchTerm]}),Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{scope:"col",children:"Book Cover"}),Object(h.jsxs)("th",{scope:"col",children:["Title",Object(h.jsx)("button",{onClick:this.onSortChange.bind(this,"title"),children:"title"===r.sort_column?Object(h.jsx)("i",{className:"fas fa-".concat(r.class)}):Object(h.jsx)("i",{className:"fas fa-sort"})})]}),Object(h.jsx)("th",{scope:"col",children:"Author"}),Object(h.jsxs)("th",{scope:"col",children:["Published Date",Object(h.jsx)("button",{style:{backgroundColor:"lightblue",width:"100px",height:"50px"},onClick:this.onSortChange.bind(this,"most_recent_publish_year"),children:"most_recent_publish_year"===r.sort_column?Object(h.jsx)("i",{className:"fas fa-".concat(r.class)}):Object(h.jsx)("i",{className:"fas fa-sort"})})]})]})}),Object(h.jsx)("tbody",{children:t})]})})}}]),r}(o.Component),f=function(){return Object(h.jsx)("footer",{className:"footer",children:Object(h.jsx)("p",{children:"Copyright 2021, All rights reserved."})})},m=function(t){Object(i.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(l.a)(this,r);for(var o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))).state={},t.getQueryString=function(t){return t.trim().replace(/\s+/g,"+")},t.buildBookSearchResults=function(t){for(var e=[],r=0;r<t.docs.length;r++){var o,n,s,c,l,a,i,u,h,d,b,j,p,_;console.log(null===(o=t.docs)||void 0===o?void 0:o[r].key),e.push({key:null===(n=t.docs)||void 0===n?void 0:n[r].key,title:null===(s=t.docs)||void 0===s?void 0:s[r].title,book_cover_url:"http://covers.openlibrary.org/b/isbn/"+(null===(c=t.docs)||void 0===c||null===(l=c[r].isbn)||void 0===l?void 0:l[0])+"-S.jpg",author:null===(a=t.docs)||void 0===a||null===(i=a[r].author_name)||void 0===i||null===(u=i.join)||void 0===u?void 0:u.call(i,","),published_date:null===(h=t.docs)||void 0===h||null===(d=h[r].publish_date)||void 0===d||null===(b=d.join)||void 0===b?void 0:b.call(d,","),most_recent_publish_year:null===(j=t.docs)||void 0===j||null===(p=j[r].publish_year)||void 0===p||null===(_=p.sort)||void 0===_?void 0:_.call(p,(function(t,e){return e-t}))[0]})}return e},t.searchBooksByTitle=function(e){t.setState({bookSearchTerm:e});var r=t.getQueryString(e);fetch("http://openlibrary.org/search.json?q="+r).then((function(t){return t.json()})).then((function(e){t.setState({searchResults:t.buildBookSearchResults(e)})})).catch((function(){}))},t}return Object(a.a)(r,[{key:"componentDidMount",value:function(){this.setState({searchResults:[]})}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(d,{subtitle:"Book Search Tool"}),Object(h.jsx)("div",{id:"wrapper",children:Object(h.jsxs)("div",{className:"main",children:[Object(h.jsx)(b,{searchBooksByTitle:this.searchBooksByTitle}),Object(h.jsx)(_,{bookSearchTerm:this.state.bookSearchTerm,results:this.state.searchResults})]})}),Object(h.jsx)(f,{})]})}}]),r}(o.Component),v=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,16)).then((function(e){var r=e.getCLS,o=e.getFID,n=e.getFCP,s=e.getLCP,c=e.getTTFB;r(t),o(t),n(t),s(t),c(t)}))};c.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(m,{})}),document.getElementById("root")),v()}},[[15,1,2]]]);
//# sourceMappingURL=main.aec1b470.chunk.js.map